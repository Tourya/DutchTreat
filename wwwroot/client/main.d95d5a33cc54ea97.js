"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[179],{565:(n,Z,s)=>{var l=s(481),m=s(700),t=s(215),h=s(4);class _{}class A{constructor(){this.orderDate=new Date,this.items=[]}get subtotal(){return this.items.reduce((e,a)=>e+a.unitPrice*a.quantity,0)}}class i{constructor(r){this.http=r,this.products=[],this.order=new A}loadProducts(){return this.http.get("/api/products").pipe((0,h.U)(r=>{this.products=r}))}addToOrder(r){let e;e=this.order.items.find(a=>a.productId===r.id),e?e.quantity++:(e=new _,e.productId=r.id,e.productTitle=r.title,e.productArtId=r.artId,e.productArtist=r.artist,e.productCategory=r.category,e.productSize=r.size,e.unitPrice=r.price,e.quantity=1,this.order.items.push(e))}}i.\u0275fac=function(r){return new(r||i)(t.LFG(m.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac});var g=s(895);function f(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t._UZ(2,"img",4),t.TgZ(3,"h5"),t._uU(4),t.qZA(),t.TgZ(5,"ul",5)(6,"li"),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"li"),t._uU(10),t.qZA(),t.TgZ(11,"li"),t._uU(12),t.qZA(),t.TgZ(13,"li"),t._uU(14),t.qZA()(),t.TgZ(15,"button",6),t.NdJ("click",function(){const x=t.CHM(e).$implicit,y=t.oxw();return t.KtG(y.store.addToOrder(x))}),t._uU(16,"Buy"),t.qZA()()()}if(2&o){const e=r.$implicit;t.xp6(2),t.MGl("src","/img/",e.artId,".jpg",t.LSH),t.s9C("alt",e.title),t.xp6(2),t.AsE("",e.category," - ",e.size,""),t.xp6(3),t.hij("Price: ",t.xi3(8,8,e.price,"EUR"),""),t.xp6(3),t.hij("Artist: ",e.artist,""),t.xp6(2),t.hij("Title: ",e.title,""),t.xp6(2),t.Oqu(e.artDescription)}}class u{constructor(r){this.store=r}ngOnInit(){this.store.loadProducts().subscribe()}}function T(o,r){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",3),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"currency"),t.qZA()()),2&o){const e=r.$implicit;t.xp6(2),t.MGl("src","/img/",e.productArtId,".jpg",t.LSH),t.s9C("alt",e.productArtist),t.xp6(2),t.Oqu(e.productCategory),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(t.xi3(9,6,e.unitPrice,"EUR")),t.xp6(3),t.Oqu(t.xi3(12,9,e.unitPrice*e.quantity,"EUR"))}}u.\u0275fac=function(r){return new(r||u)(t.Y36(i))},u.\u0275cmp=t.Xpm({type:u,selectors:[["product-list"]],decls:2,vars:1,consts:[[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"border","bg-light","rounded","p-1"],[1,"img-fluid","product-image",3,"src","alt"],[1,"products-props"],["id","buyBtn",1,"btn","btn-success",3,"click"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0),t.YNc(1,f,17,11,"div",1),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngForOf",e.store.products))},dependencies:[g.sg,g.H9],styles:[".product-image[_ngcontent-%COMP%]{border:1px #ddd solid;box-shadow:#0006 2px 2px;margin:2px}.products-props[_ngcontent-%COMP%]{font-size:.9rem}"]});class p{constructor(r){this.store=r}}p.\u0275fac=function(r){return new(r||p)(t.Y36(i))},p.\u0275cmp=t.Xpm({type:p,selectors:[["cart"]],decls:25,vars:6,consts:[[1,"table","table-condensed","table-striped"],[4,"ngFor","ngForOf"],["colspan","5"],[1,"img-fluid","product-thumb",3,"src","alt"]],template:function(r,e){1&r&&(t.TgZ(0,"h3"),t._uU(1,"Cart"),t.qZA(),t.TgZ(2,"div"),t._uU(3),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"table",0)(6,"thead")(7,"tr"),t._UZ(8,"th"),t.TgZ(9,"th"),t._uU(10,"Product"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Quantity"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Price"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Total"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,T,13,12,"tr",1),t.qZA(),t.TgZ(19,"tfoot")(20,"tr")(21,"td",2)(22,"strong"),t._uU(23),t.ALo(24,"currency"),t.qZA()()()()()),2&r&&(t.xp6(3),t.hij("Count: ",e.store.order.items.length,""),t.xp6(15),t.Q6J("ngForOf",e.store.order.items),t.xp6(5),t.hij("Subtotal: ",t.xi3(24,3,e.store.order.subtotal,"EUR"),""))},dependencies:[g.sg,g.H9],styles:[".product-thumb[_ngcontent-%COMP%]{max-width:50px}"]});class d{constructor(){this.title="Shop"}}d.\u0275fac=function(r){return new(r||d)},d.\u0275cmp=t.Xpm({type:d,selectors:[["the-shop"]],decls:7,vars:1,consts:[[1,"row"],[1,"col-9"],[1,"col-3"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3),t.qZA(),t._UZ(4,"product-list"),t.qZA(),t.TgZ(5,"div",2),t._UZ(6,"cart"),t.qZA()()),2&r&&(t.xp6(3),t.Oqu(e.title))},dependencies:[u,p],encapsulation:2});class c{}c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=t.oAB({type:c,bootstrap:[d]}),c.\u0275inj=t.cJS({providers:[i],imports:[l.b2,m.JF]}),l.q6().bootstrapModule(c).catch(o=>console.error(o))}},n=>{n.O(0,[736],()=>n(n.s=565)),n.O()}]);